#payment-query.properties
paymentInfo=SELECT PAYMENT_NO, "DATE", "TYPE", AMOUNT, REFUND_STATUS, REFUND_DATE FROM PAYMENT WHERE PAYMENT_NO=?

# refund reserved -> payment_status = 'y'
cancelPayment=UPDATE PAYMENT SET REFUND_STATUS='Y', REFUND_DATE=SYSDATE WHERE PAYMENT_NO = (SELECT P.PAYMENT_NO FROM RESERVED R JOIN PAYMENT P ON (R.PAYMENT_NO=P.PAYMENT_NO) WHERE R.RESERVED_NO=?)
downCount=UPDATE MEMBER SET TICKET_COUNT = TICKET_COUNT-1 WHERE MEMBER_NO = (SELECT MEMBER_NO FROM RESERVED WHERE RESERVED_NO=?)

# List of Payment
myPageMainPayment=SELECT DISTINCT M.TITLE, M.AGE_LIMIT, S.SCREEN_DATE, SI.MODIFY_NAME FROM RESERVED R JOIN SCREEN S ON (R.SCREEN_NO = S.SCREEN_NO) JOIN MOVIE M ON (M.MOVIE_NO = S.MOVIE_NO) JOIN STILL_IMAGE SI ON (M.MOVIE_NO = SI.MOVIE_NO) WHERE SI."LEVEL" =2 AND TO_CHAR(S.SCREEN_DATE, 'YY/MM/DD HH:mm')< TO_CHAR(SYSDATE, 'YY/MM/DD HH:mm') AND R.MEMBER_NO=? ORDER BY SCREEN_DATE DESC
countPaymentByUserNo=SELECT COUNT(*) FROM PAYMENT P JOIN RESERVED R ON(P.PAYMENT_NO = R.PAYMENT_NO) JOIN SCREEN S ON (R.SCREEN_NO = S.SCREEN_NO) WHERE R.MEMBER_NO=? AND TO_CHAR(SCREEN_DATE, 'YYYYMMDDHH24MISS')< TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
onePayment=SELECT B.* FROM (SELECT ROWNUM AS RNUM, A.* FROM(SELECT R.RESERVED_NO, P."DATE" "PAYMETN_DATE", T.NAME "T_NAME", RO.NAME "R_NAME", M.TITLE, M.AGE_LIMIT, S.SCREEN_DATE, P.PAYMENT_NO, P.AMOUNT, MM.MEMBER_NO, MM."ID", P."TYPE", SI.MODIFY_NAME FROM RESERVED R JOIN PAYMENT P ON (R.PAYMENT_NO = P.PAYMENT_NO) JOIN SCREEN S ON (S.SCREEN_NO = R.SCREEN_NO) JOIN ROOM RO ON (RO.ROOM_NO = S.ROOM_NO) JOIN THEATER T ON (T.THEATER_NO = RO.THEATER_NO) JOIN MOVIE M ON (M.MOVIE_NO = S.MOVIE_NO) JOIN MEMBER MM ON (MM.MEMBER_NO = R.MEMBER_NO) JOIN STILL_IMAGE SI ON (M.MOVIE_NO = SI.MOVIE_NO) WHERE P.REFUND_STATUS='N' AND SI."LEVEL"=0 AND TO_CHAR(SCREEN_DATE, 'YYYYMMDDHH24MISS')< TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS') AND R.MEMBER_NO=? ORDER BY SCREEN_DATE) A) B WHERE RNUM BETWEEN ? AND ?
